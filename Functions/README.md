# Registrar Functions

The main functions in Registrar software are:
- <a href='https://github.com/neurogeometry/'>Registration()</a> (generates the stack overlaps information)</br>
- <a href='https://github.com/neurogeometry/'>FindOverlaps()</a> (generates the stack overlaps information)</br>
- <a href='https://github.com/neurogeometry/'>Feature Extraction()</a> (find features in overlaps regions of all stacks)</br>
- <a href='https://github.com/neurogeometry/'>Feature Matching()</a> (pairwise feature matching) </br>
- <a href='https://github.com/neurogeometry/'>Global Registration()</a> (minimize the registration error globally and find transformation for each stack) </br>
- <a href='https://github.com/neurogeometry/'>Blending()</a> (generate seamless registered image for visualization)</br>
- <a href='https://github.com/neurogeometry/'>Retiling()</a> (generate final tiles)</br>
- <a href='https://github.com/neurogeometry/'>CreateZoomLevels()</a> (create different zoom levels)</br>

## Registration()
This is the main function in the GUI file (Registrar.m) which runs when user set parameters and click on Run on the GUI. 
```
try
    registeration(StackList_csv_pth,TransformationValue,Seq_Par,Par_workers,blendingSID,handles,LogHandle)
catch ME
    LogHandle.Children(2).String = ME.getReport;
end
```
The inputs of this function includes:

- StackList_csv_pth : the path to the input <a href='https://github.com/neurogeometry/Registrar#a-sample-input-csv-file-content'>CSV file</a>. 
- TransformationValue: this parameter defines the transformation type, 1 for Translation, 2 for Rigid, 3 for Affine, and 4 for B-Spline.
- Seq_Par: 1 for run in sequential, and 2 for parallel 
- Par_workers: sets the number of workers to be used from the local or remote cluster if Seq_Par = 1.
- blendingSID: the stack ID to be shown along with its neighboring stacks as a sample of the registration result.
- handles: the handles object of the main GUI.
- LogHandle: the handles object of the Log GUI.

## FindOverlaps()
The main function called FindOverlaps which called inside registration.m file:
```
All_overlaps = FindOverlaps(handles,StackPositions_pixels,StackSizes_pixels,StackList);
```
The inputs includes:</br>
- handles: the handles object of the main GUI.
- StackPositions_pixels: the original stack positions generated by Microscope. The size of the matrix is 3*N where 3 corresponsd to x,y,z positions and N is the number of image stacks. 
- StackSizes_pixels: the size of each stack. The size of the matrix is 3*N where 3 corresponsd to stack sizes in 3 dimentions and N is the number of image stacks. 

Stack positions and stack sizes are used to find the overlap regions between image stacks and determine each stack is overlaps with which other stacks. </br>
The output is:</br>
- All_overlaps: N*N matrix which each element determines the amount of overlap between stack i and stack j in the dataset. If there is no overlap between stack i and j, the value would be 0.

## FeatureExtraction()











